{% extends 'veterinaria/base.html' %}

{% block title %}{{ titulo }} - Sistema Veterinaria{% endblock %}

{% block content %}
<div class="container mt-4">
    <!-- Encabezado -->
    <div class="row mb-4">
        <div class="col-12">
            <h2 class="text-danger">
                <i class="bi bi-exclamation-triangle"></i>
                {{ titulo }}
            </h2>
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="{% url 'home' %}">Inicio</a></li>
                    <li class="breadcrumb-item"><a href="{% url 'mascota_list' %}">Mascotas</a></li>
                    <li class="breadcrumb-item"><a href="{% url 'mascota_detail' mascota.pk %}">{{ mascota.nombre }}</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Eliminar</li>
                </ol>
            </nav>
        </div>
    </div>

    <div class="row justify-content-center">
        <div class="col-lg-8">
            <!-- Tarjeta de confirmación -->
            <div class="card border-danger">
                <div class="card-header bg-danger text-white">
                    <h5 class="mb-0">
                        <i class="bi bi-exclamation-triangle"></i>
                        Confirmar Eliminación
                    </h5>
                </div>
                <div class="card-body">
                    <!-- Información de la mascota -->
                    <div class="row mb-4">
                        <div class="col-md-4 text-center">
                            {% if mascota.imagen %}
                                <img src="{{ mascota.imagen.url }}" 
                                     class="img-fluid rounded" 
                                     alt="Foto de {{ mascota.nombre }}"
                                     style="max-height: 150px;">
                            {% else %}
                                <div class="bg-light p-4 rounded">
                                    <i class="bi bi-heart text-muted" style="font-size: 3rem;"></i>
                                </div>
                            {% endif %}
                        </div>
                        <div class="col-md-8">
                            <h4>{{ mascota.nombre }}</h4>
                            <p class="text-muted mb-2">
                                <strong>Tipo:</strong> {{ mascota.tipo_animal.nombre }}<br>
                                <strong>Raza:</strong> {{ mascota.raza|default:"No especificada" }}<br>
                                <strong>Edad:</strong> {{ mascota.edad }} años<br>
                                <strong>Propietario:</strong> {{ mascota.propietario_nombre }}
                            </p>
                            
                            <!-- Indicadores -->
                            <div>
                                <span class="badge bg-{{ mascota.sexo|yesno:'primary,danger' }}">
                                    {{ mascota.get_sexo_display }}
                                </span>
                                <span class="badge bg-secondary">{{ mascota.get_tamaño_display }}</span>
                                {% if mascota.numero_chip %}
                                    <span class="badge bg-success">
                                        <i class="bi bi-check-circle"></i> Chip: {{ mascota.numero_chip }}
                                    </span>
                                {% endif %}
                            </div>
                        </div>
                    </div>

                    <!-- Mensaje de advertencia -->
                    <div class="alert alert-danger" role="alert">
                        <h5><i class="bi bi-exclamation-triangle"></i> ¿Está seguro que desea eliminar esta mascota?</h5>
                        <p class="mb-2">Esta acción:</p>
                        <ul class="mb-0">
                            <li>Marcará la mascota como inactiva en el sistema</li>
                            <li>La información se conservará para registros históricos</li>
                            <li>No aparecerá en las listas principales</li>
                            <li>Se puede reactivar posteriormente si es necesario</li>
                        </ul>
                    </div>

                    <!-- Información adicional si existe -->
                    {% if mascota.observaciones %}
                        <div class="alert alert-warning" role="alert">
                            <h6><i class="bi bi-info-circle"></i> Información médica registrada:</h6>
                            {% if mascota.observaciones %}
                                <p class="mb-0"><strong>Observaciones:</strong> {{ mascota.observaciones|truncatewords:20 }}</p>
                            {% endif %}
                        </div>
                    {% endif %}

                    <!-- Formulario de confirmación -->
                    <form method="post" class="mt-4">
                        {% csrf_token %}
                        <div class="d-flex gap-3 justify-content-center">
                            <button type="submit" class="btn btn-danger">
                                <i class="bi bi-trash"></i>
                                Sí, Eliminar Mascota
                            </button>
                            <a href="{% url 'mascota_detail' mascota.pk %}" class="btn btn-secondary">
                                <i class="bi bi-arrow-left"></i>
                                Cancelar
                            </a>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Información adicional -->
            <div class="alert alert-info mt-4" role="alert">
                <h6><i class="bi bi-info-circle"></i> Información importante:</h6>
                <p class="mb-0">
                    La eliminación es un "soft delete", lo que significa que los datos se conservan en la base de datos
                    para mantener la integridad de los registros históricos. Un administrador puede reactivar esta
                    mascota en el futuro si es necesario.
                </p>
            </div>
        </div>
    </div>
</div>

<style>
.card-header {
    border-bottom: 2px solid #dc3545;
}

.badge {
    font-size: 0.85em;
}

.btn {
    min-width: 150px;
}
</style>
{% endblock %}
